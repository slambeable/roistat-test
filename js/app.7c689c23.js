(function(){"use strict";var e={4792:function(e,t,a){var l=a(9242),n=a(3371),o=(a(4415),a(3942),a(4827)),r=(a(1844),a(5791)),i=(a(6809),a(7188)),s=(a(2064),a(8807)),u=(a(3877),a(7960),a(7113),a(3417)),c=(a(172),a(3396)),d=a(7139);const m={class:"dialog-footer"};function p(e,t,a,l,n,p){const b=u.EZ,f=i.nH,h=s.BT,g=s.km,v=i.ly,w=r.mi,D=o.d0;return(0,c.wg)(),(0,c.j4)(D,{"model-value":e.isDialogVisible,title:e.dialogOptions.dialogTitle,class:"dialog-add-user",center:"",onClosed:e.cancelDialog},{footer:(0,c.w5)((()=>[(0,c._)("span",m,[(0,c.Wm)(w,{onClick:e.cancelDialog},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.dialogOptions.buttonCancelLabel),1)])),_:1},8,["onClick"]),(0,c.Wm)(w,{type:"primary",onClick:t[3]||(t[3]=t=>e.addUser(e.ruleFormRef))},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.dialogOptions.buttonConfirmLabel),1)])),_:1})])])),default:(0,c.w5)((()=>[(0,c.Wm)(v,{ref:"ruleFormRef",model:e.ruleForm,rules:e.rules,"label-width":e.dialogOptions.formLabelWidth,class:"demo-ruleForm",size:"default","status-icon":""},{default:(0,c.w5)((()=>[(0,c.Wm)(f,{label:e.dialogOptions.labelNameItem,prop:"name"},{default:(0,c.w5)((()=>[(0,c.Wm)(b,{modelValue:e.ruleForm.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.ruleForm.name=t)},null,8,["modelValue"])])),_:1},8,["label"]),(0,c.Wm)(f,{label:e.dialogOptions.labelPhoneItem,prop:"phone"},{default:(0,c.w5)((()=>[(0,c.Wm)(b,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":t[1]||(t[1]=t=>e.ruleForm.phone=t)},null,8,["modelValue"])])),_:1},8,["label"]),(0,c.Wm)(f,{class:"dialog-add-user-last-form-item",label:e.dialogOptions.labelChiefItem,prop:"chief"},{default:(0,c.w5)((()=>[(0,c.Wm)(g,{class:"dialog-add-user__chief-select",modelValue:e.ruleForm.chief,"onUpdate:modelValue":t[2]||(t[2]=t=>e.ruleForm.chief=t),clearable:"",placeholder:e.dialogOptions.selectChiefPlaceholder},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.selectData,(e=>((0,c.wg)(),(0,c.j4)(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","rules","label-width"])])),_:1},8,["model-value","title","onClosed"])}a(7658);var b=a(4870),f=a(65);const h=(e,t,a)=>{t?setTimeout((()=>{Number.isInteger(Number(t))?11!==t.length?a(new Error("Телефон должен содержать 11 цифр")):a():a(new Error("Телефон может состоять только из цифр"))}),1e3):a(new Error("Пожалуйства введие телефон"))},g=(e,t,a)=>{t?/[^а-яё]/i.test(t)?a(new Error("Имя может состоять только из кириллицы")):a():a(new Error("Пожалуйства введие имя"))};var v=a(2482);class w{constructor(){(0,v.Z)(this,"storage",window.localStorage),(0,v.Z)(this,"users",window.localStorage.getItem("users")),w.instance=this}static getInstance(){return w.instance}getUsers(){return this.users}saveChangeInLocalStorage(e){const t=JSON.stringify(e);this.storage.setItem("users",t)}}(0,v.Z)(w,"instance",new w);var D=w,O=(0,c.aZ)({name:"DialogAddUser",props:{isDialogVisible:{type:Boolean,default:!1}},setup(e,{emit:t}){const a={dialogTitle:"Добавить пользователя",formLabelWidth:"120px",labelNameItem:"Имя",labelPhoneItem:"Телефон",labelChiefItem:"Начальник",selectChiefPlaceholder:"Выберити начальника",buttonCancelLabel:"Отмена",buttonConfirmLabel:"Подтвердить"},l=D.getInstance(),n=(0,f.oR)(),o=(0,b.iH)(),r=(0,b.qj)({name:"",phone:"",chief:""}),i=(0,b.qj)({name:[{validator:g,trigger:"blur"}],phone:[{validator:h,trigger:"blur"}]}),s=()=>{o.value&&o.value.resetFields()},u=()=>{t("closeDialog"),s()},d=e=>e.reduce(((e,t)=>t.children.length>0?[...e,{label:t.id,value:t.id},...d(t.children)]:[...e,{label:t.id,value:t.id}]),[]),m=(e,t)=>e.reduce(((e,a)=>{const{id:l,children:n}=a;return e||(l===t?n:n.length>0?m(n,t):e)}),null),p=async e=>{if(!e)return;const t=await e.validate((e=>{if(e){const e=""===r.chief?n.state.tableData:m(n.state.tableData,r.chief),t=e.length;e.push({id:`${r.name}-${r.phone}-${t}`,phone:Number(r.phone),name:r.name,children:[]})}}));t&&(u(),l.saveChangeInLocalStorage(n.state.tableData))},v=(0,c.Fl)((()=>{const e=d(n.state.tableData);return e}));return{dialogOptions:a,ruleFormRef:o,ruleForm:r,rules:i,selectData:v,cancelDialog:u,addUser:p}}}),C=a(89);const W=(0,C.Z)(O,[["render",p]]);var k=W,I=a(6374),U=(a(5088),a(3209));a(7644),a(9007);function _(e,t,a,n,o,i){const s=U.$Y,u=r.mi,m=U.eI;return(0,c.wg)(),(0,c.j4)(m,{data:e.$store.state.tableData,class:"user-table","row-key":"id",border:"","default-expand-all":""},{default:(0,c.w5)((()=>[(0,c.Wm)(s,{prop:"name",label:e.tableOptions.nameLabelHeader,sortable:""},null,8,["label"]),(0,c.Wm)(s,{prop:"phone",label:e.tableOptions.phoneLabelHeader,sortable:""},null,8,["label"]),(0,c.Wm)(s,{fixed:"right",width:e.tableOptions.removeColumnWidth},{default:(0,c.w5)((t=>[(0,c.Wm)(u,{link:"",type:"primary",size:"small",onClick:(0,l.iM)((a=>e.deleteRow(e.$store.state.tableData,t.row.id)),["prevent"])},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.tableOptions.removeButtonLabel),1)])),_:2},1032,["onClick"])])),_:1},8,["width"])])),_:1},8,["data"])}var y=(0,c.aZ)({name:"UsersTable",setup(){const e=(0,f.oR)(),t=D.getInstance(),a={nameLabelHeader:"Имя",phoneLabelHeader:"Телефон",removeButtonLabel:"Удалить",removeColumnWidth:"85"},l=(a,n)=>{const o=a.findIndex((({id:e,children:t})=>(0!==t.length&&l(t,n),e===n)));o>=0&&a.splice(o,1),t.saveChangeInLocalStorage(e.state.tableData)};return{tableOptions:a,deleteRow:l}}});const L=(0,C.Z)(y,[["render",_]]);var F=L;function T(e,t,a,l,n,o){const i=r.mi,s=F,u=I.Q2,m=k;return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(u,{wrap:"",direction:"vertical",size:e.appOptions.spaceSize},{default:(0,c.w5)((()=>[(0,c.Wm)(i,{onClick:e.showDialogAddUser},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.appOptions.buttonLabel),1)])),_:1},8,["onClick"]),(0,c.Wm)(s)])),_:1},8,["size"]),(0,c.Wm)(m,{isDialogVisible:e.isDialogVisible,onCloseDialog:e.closeDialogAddUser},null,8,["isDialogVisible","onCloseDialog"])],64)}var V=(0,c.aZ)({name:"App",components:{UsersTable:F,DialogAddUser:k},setup(){const e={buttonLabel:"Добавить",spaceSize:30},t=(0,f.oR)(),a=(0,b.iH)(!1);t.commit("setTableData");const l=()=>{a.value=!0},n=()=>{a.value=!1};return{appOptions:e,isDialogVisible:a,showDialogAddUser:l,closeDialogAddUser:n}}});const Z=(0,C.Z)(V,[["render",T]]);var j=Z;class z{constructor(){(0,v.Z)(this,"defaultTableData",[{id:"Боб-45614565136",phone:45614565136,name:"Боб",children:[]},{id:"Андрей-41514254213",phone:41514254213,name:"Андрей",children:[]},{id:"Робин-16462162142",phone:16462162142,name:"Робин",children:[{id:"Боб-45614565132",phone:45614565132,name:"Боб",children:[]}]}]),z.instance=this}static getInstance(){return z.instance}getDefaultTableData(){return this.defaultTableData}}(0,v.Z)(z,"instance",new z);var x=z;const H=x.getInstance(),S=D.getInstance();var R=(0,f.MT)({state:{tableData:null},mutations:{setTableData(e){e.tableData=S.getUsers()?JSON.parse(S.getUsers()??""):H.getDefaultTableData()}}});const A=(0,l.ri)(j);A.use(R).use(n.Z),A.mount("#app")}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,o){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],n=e[c][1],o=e[c][2];for(var i=!0,s=0;s<l.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[s])}))?l.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,o,r=l[0],i=l[1],s=l[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var c=s(a)}for(t&&t(l);u<r.length;u++)o=r[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},l=self["webpackChunkroistat_test"]=self["webpackChunkroistat_test"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(4792)}));l=a.O(l)})();
//# sourceMappingURL=app.7c689c23.js.map